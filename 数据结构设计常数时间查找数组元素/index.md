# ã€æ•°æ®ç»“æ„è®¾è®¡ã€‘å¸¸æ•°æ—¶é—´æŸ¥æ‰¾æ•°ç»„å…ƒç´ 


## 1 é¢˜ç›®

**åŠ›æ‰£ [380. O(1) æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ ](https://leetcode.cn/problems/insert-delete-getrandom-o1/)**

å®ç°`RandomizedSet` ç±»ï¼š

- `RandomizedSet()` åˆå§‹åŒ– `RandomizedSet` å¯¹è±¡
- `bool insert(int val)` å½“å…ƒç´  `val` ä¸å­˜åœ¨æ—¶ï¼Œå‘é›†åˆä¸­æ’å…¥è¯¥é¡¹ï¼Œå¹¶è¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
- `bool remove(int val)` å½“å…ƒç´  `val` å­˜åœ¨æ—¶ï¼Œä»é›†åˆä¸­ç§»é™¤è¯¥é¡¹ï¼Œå¹¶è¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
- `int getRandom()` éšæœºè¿”å›ç°æœ‰é›†åˆä¸­çš„ä¸€é¡¹ï¼ˆæµ‹è¯•ç”¨ä¾‹ä¿è¯è°ƒç”¨æ­¤æ–¹æ³•æ—¶é›†åˆä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚æ¯ä¸ªå…ƒç´ åº”è¯¥æœ‰ **ç›¸åŒçš„æ¦‚ç‡** è¢«è¿”å›ã€‚

ä½ å¿…é¡»å®ç°ç±»çš„æ‰€æœ‰å‡½æ•°ï¼Œå¹¶æ»¡è¶³æ¯ä¸ªå‡½æ•°çš„ **å¹³å‡** æ—¶é—´å¤æ‚åº¦ä¸º `O(1)` ã€‚

## 2 è§£æ

è€ƒè™‘é¢˜ç›®çš„ä¸¤ä¸ªè¦æ±‚ï¼š  

ğŸ”´ æ’å…¥ã€åˆ é™¤ã€æŸ¥è¯¢éšæœºå…ƒç´ çš„æ—¶é—´å¤æ‚åº¦å¿…é¡»éƒ½æ˜¯ O(1)ã€‚  æƒ³åˆ°ä½¿ç”¨ STL ä¸­çš„ map ç»“æ„ã€‚

ğŸŸ¡ getRandom() å¿…é¡»ç­‰æ¦‚ç‡çš„è¿”å›éšæœºå…ƒç´ ã€‚ é‚£ä¹ˆåº•å±‚å¿…é¡»ç”¨æ•°ç»„å®ç°ï¼Œä¸”æ•°ç»„æ˜¯ç´§å‡‘çš„ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥ç”Ÿæˆéšæœºæ•°ä½œä¸ºæ•°ç»„ç´¢å¼•ã€‚

ğŸŸ¢  ç»¼åˆè€ƒè™‘ä»¥ä¸Š2ä¸ªæ¡ä»¶ï¼šåœ¨ O(1) çš„æ—¶é—´åˆ é™¤æ•°ç»„ä¸­çš„æŸâ¼€ä¸ªå…ƒç´  valï¼Œå¯ä»¥å…ˆæŠŠè¿™ä¸ªå…ƒç´ äº¤æ¢åˆ°æ•°ç»„çš„å°¾éƒ¨ï¼Œç„¶åå† pop æ‰ã€‚è€Œäº¤æ¢ä¸¤ä¸ªå…ƒç´ éœ€è¦çŸ¥é“ç´¢å¼•ï¼Œæ•…ç”¨å“ˆå¸Œè¡¨å­˜å‚¨æ¯ä¸ªå…ƒç´ åŠå…¶ç´¢å¼•ã€‚ 

ä»£ç å®ç°ï¼š

```c++
class RandomizedSet {
public:
    // å­˜å‚¨å…ƒç´ çš„å€¼
    vector<int> ve;
    // é”®æ˜¯å…ƒç´ å€¼ï¼Œå€¼æ˜¯å…ƒç´ åœ¨veä¸­çš„ç´¢å¼•
    unordered_map<int, int> ma; 
    RandomizedSet() {

    }
    
    bool insert(int val) {
        // è‹¥ val ä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥å¹¶è¿”å›true
        if(ma.find(val) == ma.end()){   // æ³¨æ„æ¡ä»¶ï¼åˆ«å†™åäº†
            // å¹¶è®°å½• val å¯¹åº”çš„ç´¢å¼•å€¼ï¼Œæ³¨æ„æ·»åŠ é”®å€¼å¯¹çš„å†™æ³•
            ma[val]=ve.size();  
            ve.push_back(val);
            return true;
        }
        return false;
    }
    
    bool remove(int val) {
        if(ma.find(val) != ma.end()){
            // å°†æœ€åâ¼€ä¸ªå…ƒç´ å¯¹åº”çš„ç´¢å¼•ä¿®æ”¹ä¸º ma[val]
            ma[ve.back()]=ma[val];  
            // äº¤æ¢ val å’Œæœ€åâ¼€ä¸ªå…ƒç´ 
            swap(ve[ma[val]],ve.back());    
            // åœ¨æ•°ç»„ä¸­åˆ é™¤å…ƒç´  val
            ve.pop_back();  
            // åˆ é™¤å…ƒç´  val å¯¹åº”çš„ç´¢å¼•
            ma.erase(val);  
            return true;
        }
        return false;
    }
    
    int getRandom() {
        // éšæœºè·å– nums ä¸­çš„â¼€ä¸ªå…ƒç´ 
        return ve[rand() % ve.size()];
    }
};
```

